(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{105:function(t,a,r){"use strict";r.r(a);var e={data:function(){return{orders:null,order:null,paginator:null}},created:function(){this.loadData(this.$route.query.page)},beforeRouteUpdate:function(t,a,r){t.params.id?this.getOrderData(t.params.id):this.loadData(t.query.page),r()},methods:{loadData:function(t){this.$route.params.id?this.getOrderData(this.$route.params.id):this.getOrdersList(t)},getOrdersList:function(t){var a=this;this.$store.dispatch("get_orders",{page:t||1}).then(function(t){a.orders=t.data.data,a.paginator=t.data.meta}).catch(function(t){return console.log(t)})},getOrderData:function(t){var a=this;this.$store.dispatch("get_order",t).then(function(t){a.order=t.data.data}).catch(function(t){return console.log(t)})},cancelOrder:function(t,a){var r=this,e={id:a.id,status:"canceled",details:"Order was canceled by "+a.user.name};this.$store.dispatch("update_order",e).then(function(t){r.$toastr("info","Success! Order was canceled.","Information"),r.loadData()}).catch(function(t){r.$toastr("error","Aah! Something went wrong.","Error")})}},components:{QuantityUpdateModule:function(){return r.e(0).then(r.bind(null,118))}}},s=r(0),n=Object(s.a)(e,function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"container",staticStyle:{margin:"100px auto"}},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("p",{staticClass:"card-header-title"},[t._v("\n                "+t._s(t.$route.params.id?t.$route.query.user?"User Information":"Order Data":"Orders")+"\n            ")])]),t._v(" "),r("div",{staticClass:"card-content"},[r("div",{staticClass:"content"},[r("div",{staticClass:"table-container",staticStyle:{"overflow-x":"auto"}},[t.$route.params.id?t._e():r("table",{staticClass:"table"},[t._m(0),t._v(" "),r("tbody",t._l(t.orders,function(a,e){return r("tr",{key:e},[r("td",[t._v(t._s(++e))]),t._v(" "),r("td",[t._v(t._s(a.status))]),t._v(" "),r("td",[t._v(t._s(a.details))]),t._v(" "),r("td",[t._v(t._s(a.date))]),t._v(" "),r("td",[r("router-link",{staticClass:"button is-primary",attrs:{to:{name:"order-data",params:{id:a.id}}}},[t._v("View Data")])],1),t._v(" "),r("td",[r("a",{staticClass:"button is-danger",class:{disabled:"canceled"==a.status},on:{click:function(r){return r.preventDefault(),t.cancelOrder(r,a)}}},[t._v("\n                                                "+t._s("canceled"==a.status?"Order is canceled.":"delivered"==a.status?"Order is delivered":"Cancel Order")+"\n                                    ")])])])}),0)]),t._v(" "),t.$route.params.id&&t.order&&!t.$route.query.user?r("table",{staticClass:"table"},[t._m(1),t._v(" "),r("tbody",t._l(JSON.parse(t.order.cart),function(a,e){return r("tr",{key:e},[r("td",[t._v(t._s(++e))]),t._v(" "),r("td",[r("router-link",{attrs:{to:{name:"product",params:{id:a.product.id}}}},[t._v("\n                                        "+t._s(a.product.name)+"\n                                    ")])],1),t._v(" "),r("td",[r("router-link",{attrs:{to:{name:"category",params:{id:a.product.category.id}}}},[t._v("\n                                        "+t._s(a.product.category.name)+"\n                                    ")])],1),t._v(" "),r("td",[t._v(t._s(a.quantity))]),t._v(" "),r("td",[r("router-link",{attrs:{to:{name:"order-data",query:{user:t.order.user.id}}}},[t._v("View User Data")])],1)])}),0)]):t._e(),t._v(" "),t.$route.query.user&&t.$route.params.id&&t.order?r("table",{staticClass:"table"},[t._m(2),t._v(" "),r("tbody",[r("tr",[r("td",[t._v(t._s(t.order.user.name))]),t._v(" "),r("td",[r("a",{attrs:{href:"mailto:"+t.order.user.email}},[t._v(t._s(t.order.user.email))])]),t._v(" "),r("td",[r("a",{attrs:{href:"tel:"+t.order.user.phone}},[t._v(t._s(t.order.user.phone))])])])]),t._v(" "),t._m(3),t._v(" "),r("tbody",t._l(t.order.address,function(a){return r("tr",{key:a.id},[r("td",[t._v(t._s(a.country))]),t._v(" "),r("td",[t._v(t._s(a.state))]),t._v(" "),r("td",[t._v(t._s(a.address))])])}),0)]):t._e()])])]),t._v(" "),r("div",{staticClass:"card-footer"},[r("div",{staticClass:"content"},[!t.$route.params.id&&t.paginator?r("nav",{staticClass:"pagination is-rounded",staticStyle:{margin:"10px auto"},attrs:{role:"navigation"}},[r("router-link",{staticClass:"pagination-previous",class:{disabled:t.paginator.current_page<=1},attrs:{to:{name:"order",query:{page:t.paginator.current_page-1}}}},[t._v("Previous")]),t._v(" "),r("router-link",{staticClass:"pagination-next",class:{disabled:t.paginator.current_page>=t.paginator.last_page},attrs:{to:{name:"order",query:{page:t.paginator.current_page+1}}}},[t._v("Next page")]),t._v(" "),r("ul",{staticClass:"pagination-list",staticStyle:{"list-style":"none","margin-top":"-3px"}},t._l(t.paginator.last_page,function(a){return r("li",{key:a},[r("router-link",{staticClass:"pagination-link",class:{disabled:a==t.paginator.current_page},attrs:{to:{name:"order",query:{page:a}}}},[t._v("\n                                "+t._s(a)+"\n                            ")])],1)}),0)],1):t._e()])])])])},[function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("thead",[r("tr",[r("th",[t._v("#")]),t._v(" "),r("th",[t._v("Status")]),t._v(" "),r("th",[t._v("Description")]),t._v(" "),r("th",[t._v("Date")]),t._v(" "),r("th",{attrs:{colspan:"2"}},[t._v("Actions")])])])},function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("thead",[r("tr",[r("th",[t._v("#")]),t._v(" "),r("th",[t._v("Product Name")]),t._v(" "),r("th",[t._v("Product Category")]),t._v(" "),r("th",[t._v("Product Quantity")]),t._v(" "),r("th",[t._v("User Information")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{colspan:"3"}},[this._v("Personal Information")])]),this._v(" "),a("tr",[a("th",[this._v("Name")]),this._v(" "),a("th",[this._v("Email")]),this._v(" "),a("th",[this._v("Phone")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{colspan:"3"}},[this._v("Address Information")])]),this._v(" "),a("tr",[a("th",[this._v("Country")]),this._v(" "),a("th",[this._v("State / Province")]),this._v(" "),a("th",[this._v("Address")])])])}],!1,null,null,null);a.default=n.exports}}]);